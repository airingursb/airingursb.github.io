<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>浅谈设计模式之工厂方法模式 | Airing的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="工厂模式首先需要先说一下工厂模式，工厂模式根据抽象程度的不同分为三种：简单工厂模式（也叫静态工厂模式）、工厂方法模式、以及抽象工厂模式。在说完抽象工厂模式之后，我们再来区分一下三者的不同。">
<meta property="og:type" content="article">
<meta property="og:title" content="浅谈设计模式之工厂方法模式">
<meta property="og:url" content="http://ursb.me/2015/07/17/浅谈设计模式之工厂方法模式/index.html">
<meta property="og:site_name" content="Airing的博客">
<meta property="og:description" content="工厂模式首先需要先说一下工厂模式，工厂模式根据抽象程度的不同分为三种：简单工厂模式（也叫静态工厂模式）、工厂方法模式、以及抽象工厂模式。在说完抽象工厂模式之后，我们再来区分一下三者的不同。">
<meta property="og:image" content="http://7xkcl8.com1.z0.glb.clouddn.com/1571711080362679fdea27do.jpg">
<meta property="og:image" content="http://7xkcl8.com1.z0.glb.clouddn.com/157172.png">
<meta property="og:image" content="http://7xkcl8.com1.z0.glb.clouddn.com/157173.png">
<meta property="og:image" content="http://7xkcl8.com1.z0.glb.clouddn.com/157171.jpg">
<meta property="og:image" content="http://7xkcl8.com1.z0.glb.clouddn.com/157174.png">
<meta property="og:updated_time" content="2016-02-20T14:12:11.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="浅谈设计模式之工厂方法模式">
<meta name="twitter:description" content="工厂模式首先需要先说一下工厂模式，工厂模式根据抽象程度的不同分为三种：简单工厂模式（也叫静态工厂模式）、工厂方法模式、以及抽象工厂模式。在说完抽象工厂模式之后，我们再来区分一下三者的不同。">
  
    <link rel="alternative" href="/atom.xml" title="Airing的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <meta name="google-site-verification" content="SJrrucUlOVnExtrPtDgervvLXm4dWS90P4srRT8njfw" />
  <meta name="baidu-site-verification" content="i1jenkuRPy" />
  <script type="text/javascript" src="/js/echarts.min.js"></script>
  <script type="text/javascript" src="/js/jquery-2.1.4.min.js"></script>
  <script type="text/javascript" src="/js/jquery.githubRepoWidget.min.js" charset="utf-8"></script>
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">  
  <link href="/css/airia.css" rel="stylesheet">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/img/face.png" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Airing</a></h1>
		</hgroup>

		
		<p class="header-subtitle">我是一只小小小小熊</p>
				
		
		<p class="header-subtitle">总计写了214.4k字</p>

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>捐助本站</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
							<li><a href="/collection">文集</a></li>
				        
							<li><a href="/photo">相册</a></li>
				        
							<li><a href="/about">留言板</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/airingursb" title="github">github</a>
					        
								<a class="jianshu" target="_blank" href="http://www.jianshu.com/users/b7757a81a98f/latest_articles" title="jianshu">jianshu</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/2696578192/profile?topnav=1&wvr=6" title="weibo">weibo</a>
					        
								<a class="wymusic" target="_blank" href="http://music.163.com/#/user/home?id=94609819" title="wymusic">wymusic</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/C/" style="font-size: 11.43px;">C</a> <a href="/tags/Canvas/" style="font-size: 20px;">Canvas</a> <a href="/tags/Game/" style="font-size: 10px;">Game</a> <a href="/tags/HTML5/" style="font-size: 20px;">HTML5</a> <a href="/tags/Hexo/" style="font-size: 11.43px;">Hexo</a> <a href="/tags/Java/" style="font-size: 18.57px;">Java</a> <a href="/tags/JavaScript/" style="font-size: 11.43px;">JavaScript</a> <a href="/tags/Linux/" style="font-size: 11.43px;">Linux</a> <a href="/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/tags/Visual-Basic/" style="font-size: 10px;">Visual Basic</a> <a href="/tags/iOS/" style="font-size: 11.43px;">iOS</a> <a href="/tags/人工智能/" style="font-size: 10px;">人工智能</a> <a href="/tags/哲学/" style="font-size: 10px;">哲学</a> <a href="/tags/教育/" style="font-size: 14.29px;">教育</a> <a href="/tags/数据分析/" style="font-size: 11.43px;">数据分析</a> <a href="/tags/数据库/" style="font-size: 12.86px;">数据库</a> <a href="/tags/正则表达式/" style="font-size: 10px;">正则表达式</a> <a href="/tags/硬件/" style="font-size: 10px;">硬件</a> <a href="/tags/第三方/" style="font-size: 10px;">第三方</a> <a href="/tags/算法/" style="font-size: 10px;">算法</a> <a href="/tags/设计模式/" style="font-size: 17.14px;">设计模式</a> <a href="/tags/读书/" style="font-size: 12.86px;">读书</a> <a href="/tags/转载/" style="font-size: 10px;">转载</a> <a href="/tags/随笔/" style="font-size: 15.71px;">随笔</a> <a href="/tags/黑科技/" style="font-size: 11.43px;">黑科技</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://nomanteam.github.io/Hole/">NoMan</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://urdb.me/">urdb.me</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">谢谢支持！使用支付宝扫码即可。
					<img src="http://7xkcl8.com1.z0.glb.clouddn.com/ursbzhifubao.png-zfb.jpg" />
					</div>
					
				</section>
				
			</div>
		</div>
		</header>	
		
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Airing</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="/img/face.png" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">Airing</h1>
			</hgroup>
			
			<p class="header-subtitle">我是一只小小小小熊</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/collection">文集</a></li>
		        
					<li><a href="/photo">相册</a></li>
		        
					<li><a href="/about">留言板</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/airingursb" title="github">github</a>
			        
						<a class="jianshu" target="_blank" href="http://www.jianshu.com/users/b7757a81a98f/latest_articles" title="jianshu">jianshu</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/2696578192/profile?topnav=1&wvr=6" title="weibo">weibo</a>
			        
						<a class="wymusic" target="_blank" href="http://music.163.com/#/user/home?id=94609819" title="wymusic">wymusic</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-浅谈设计模式之工厂方法模式" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
		<a href="/2015/07/17/浅谈设计模式之工厂方法模式/" class="article-date">
  	<time datetime="2015-07-17T13:11:59.000Z" itemprop="datePublished">2015-07-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
	  
  
    <h1 class="article-title" itemprop="name">
      浅谈设计模式之工厂方法模式
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/设计模式/">设计模式</a></li></ul>
	</div>

        
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/技术/">技术</a>
	</div>


        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <link rel="stylesheet" type="text/css" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js"> </script><p><img src="http://7xkcl8.com1.z0.glb.clouddn.com/1571711080362679fdea27do.jpg" alt="优美图"></p>
<h2 id="u5DE5_u5382_u6A21_u5F0F"><a href="#u5DE5_u5382_u6A21_u5F0F" class="headerlink" title="工厂模式"></a>工厂模式</h2><p>首先需要先说一下工厂模式，工厂模式根据<strong><em>抽象程度</em></strong>的不同分为三种：<strong>简单工厂模式（也叫静态工厂模式）、工厂方法模式、以及抽象工厂模式</strong>。在说完抽象工厂模式之后，我们再来区分一下三者的不同。<br><a id="more"></a><br>工厂模式的主要优点有：</p>
<ul>
<li>可以使代码结构清晰，有效地封装变化。在编程中，产品类的实例化有时候是比较复杂和多变的，通过工厂模式，将产品的实例化封装起来，使得调用者根本无需关心产品的实例化过程，只需依赖工厂即可得到自己想要的产品。</li>
<li>对调用者屏蔽具体的产品类。如果使用工厂模式，调用者只关心产品的接口就可以了，至于具体的实现，调用者根本无需关心。即使变更了具体的实现，对调用者来说没有任何影响。</li>
<li>降低耦合度。产品类的实例化通常来说是很复杂的，它需要依赖很多的类，而这些类对于调用者来说根本无需知道，如果使用了工厂方法，我们需要做的仅仅是实例化好产品类，然后交给调用者使用。对调用者来说，产品所依赖的类都是透明的。</li>
</ul>
<h2 id="u5DE5_u5382_u65B9_u6CD5_u6A21_u5F0F_28Factory_method_pattern_29"><a href="#u5DE5_u5382_u65B9_u6CD5_u6A21_u5F0F_28Factory_method_pattern_29" class="headerlink" title="工厂方法模式(Factory method pattern)"></a>工厂方法模式(Factory method pattern)</h2><p>今天我们的主角是工厂方法模式。为什么不先介绍简单工厂模式呢？因为它不在GoF提到的23种设计模式里，而且内容较为简单难以说成一章，所以只放在后面的区别里会简单介绍一下。</p>
<p>首先先看一下Wiki给我们的两张图片。</p>
<p>用UML描述的工厂方法模式：<br><img src="http://7xkcl8.com1.z0.glb.clouddn.com/157172.png" alt="UML"></p>
<p>用LePUS3描述的工厂方法模式：<br><img src="http://7xkcl8.com1.z0.glb.clouddn.com/157173.png" alt="LePUS3"></p>
<p>可能有点抽象，接下来再来展示我从网上找到的具体一点的类图。</p>
<p><img src="http://7xkcl8.com1.z0.glb.clouddn.com/157171.jpg" alt="UML"><br><img src="http://7xkcl8.com1.z0.glb.clouddn.com/157174.png" alt="UML"></p>
<p> 通过工厂方法模式的类图可以看到，工厂方法模式有四个要素：</p>
<ul>
<li><strong>工厂接口</strong>。工厂接口是工厂方法模式的核心，与调用者直接交互用来提供产品。在实际编程中，有时候也会使用一个抽象类来作为与调用者交互的接口，其本质上是一样的。</li>
<li><strong>工厂实现</strong>。在编程中，工厂实现决定如何实例化产品，是实现扩展的途径，需要有多少种产品，就需要有多少个具体的工厂实现。</li>
<li><strong>产品接口</strong>。产品接口的主要目的是定义产品的规范，所有的产品实现都必须遵循产品接口定义的规范。产品接口是调用者最为关心的，产品接口定义的优劣直接决定了调用者代码的稳定性。同样，产品接口也可以用抽象类来代替，但要注意最好不要违反里氏替换原则。</li>
<li><strong>产品实现</strong>。实现产品接口的具体类，决定了产品在客户端中的具体行为。</li>
</ul>
<p>前文提到的简单工厂模式跟工厂方法模式极为相似，区别是：<strong><em>简单工厂只有三个要素，他没有工厂接口，并且得到产品的方法一般是静态的。因为没有工厂接口，所以在工厂实现的扩展性方面稍弱，可以算所工厂方法模式的简化版，关于简单工厂模式，最后会简单说两句。</em></strong></p>
<h3 id="u4E3E_u4F8B"><a href="#u4E3E_u4F8B" class="headerlink" title="举例"></a>举例</h3><p>如果抛开设计模式的范畴，“工厂方法”这个词也可以指作为“工厂”的方法，这个方法的主要目的就是创建对象，而这个方法不一定在单独的工厂类中。这些方法通常作为静态方法，定义在方法所实例化的类中。</p>
<p>每个工厂方法都有特定的名称。在许多面向对象的编程语言中，构造方法必须和它所在的类具有相同的名称，这样的话，如果有多种创建对象的方式（重载）就可能导致歧义。工厂方法没有这种限制，所以可以具有描述性的名称。举例来说，根据两个实数创建一个复数，而这两个实数表示直角坐标或极坐标，如果使用工厂方法，方法的含义就非常清晰了。当工厂方法起到这种消除歧义的作用时，构造方法常常被设置为私有方法，从而强制客户端代码使用工厂方法创建对象。</p>
<p>下面的例子展示了Java中实现复数创建的代码：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Complex</span> </span>&#123;</span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Complex <span class="title">fromCartesianFactory</span><span class="params">(<span class="keyword">double</span> real, <span class="keyword">double</span> imaginary)</span> </span>&#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="keyword">new</span> Complex(real, imaginary);</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Complex <span class="title">fromPolarFactory</span><span class="params">(<span class="keyword">double</span> modulus, <span class="keyword">double</span> angle)</span> </span>&#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="keyword">new</span> Complex(modulus * cos(angle), modulus * sin(angle));</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="function"><span class="keyword">private</span> <span class="title">Complex</span><span class="params">(<span class="keyword">double</span> a, <span class="keyword">double</span> b)</span> </span>&#123;</span><br><span class="line">         <span class="comment">//...</span></span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Complex product = Complex.fromPolarFactory(<span class="number">1</span>, pi);</span><br></pre></td></tr></table></figure></p>
<h3 id="u9002_u7528_u6027"><a href="#u9002_u7528_u6027" class="headerlink" title="适用性"></a>适用性</h3><p>下列情况可以考虑使用工厂方法模式：</p>
<ul>
<li>创建对象需要大量重复的代码。</li>
<li>创建对象需要访问某些信息，而这些信息不应该包含在复合类中。</li>
<li>创建对象的生命周期必须集中管理，以保证在整个程序中具有一致的行为。<br>工厂方法模式常见于工具包和框架中，在这些库中可能需要创建客户端代码实现的具体类型的对象。</li>
</ul>
<p>平行的类层次结构中，常常需要一个层次结构中的对象能够根据需要创建另一个层次结构中的对象。</p>
<p>工厂方法模式可以用于测试驱动开发，从而允许将类放在测试中。举例来说，<code>Foo</code>这个类创建了一个<code>Dangerous</code>对象，但是<code>Dangerous</code>对象不能放在自动的单元测试中（可能它需要访问产品数据库，而这个数据库不是随时能够访问到的）。所以，就可以把<code>Dangerous</code>对象的创建交由<code>Foo</code>类的一个方法（虚函数）<code>createDangerous</code>完成。为了测试，再创建一个<code>Foo</code>的一个子类<code>TestFoo</code>，重写<code>createDangerous</code>方法，在方法中创建并返回一个<code>FakeDangerous</code>（<code>Dangerous</code>的子类），而这是一个模拟对象。这样，单元测试就可以使用<code>TestFoo</code>来测试<code>Foo</code>的功能，从而避免了使用<code>Dangerous</code>对象带来的副作用。</p>
<blockquote>
<p>不管是简单工厂模式，工厂方法模式还是抽象工厂模式，他们具有类似的特性，所以他们的适用场景也是类似的。</p>
<ul>
<li>首先，作为一种创建类模式，在任何需要生成复杂对象的地方，都可以使用工厂方法模式。有一点需要注意的地方就是复杂对象适合使用工厂模式，而简单对象，特别是只需要通过new就可以完成创建的对象，无需使用工厂模式。如果使用工厂模式，就需要引入一个工厂类，会增加系统的复杂度。</li>
<li>其次，工厂模式是一种典型的解耦模式，迪米特法则在工厂模式中表现的尤为明显。假如调用者自己组装产品需要增加依赖关系时，可以考虑使用工厂模式。将会大大降低对象之间的耦合度。</li>
<li>再次，由于工厂模式是依靠抽象架构的，它把实例化产品的任务交由实现类完成，扩展性比较好。也就是说，当需要系统有比较好的扩展性时，可以考虑工厂模式，不同的产品用不同的实现工厂来组装。</li>
</ul>
</blockquote>
<p>以上的话来自于CSDN博客的一篇文章，里面谈到了运用工厂方法模式的优越性，只通过了一个简单的组装汽车的小例子，这里例子过多故不再引用。所以强烈推荐戳一戳看一看：<a href="http://blog.csdn.net/zhengzhb/article/details/7348707" target="_blank" rel="external">CSDN卡奴达摩的专栏——23种设计模式（2）：工厂方法模式</a>。</p>
<h3 id="u5C40_u9650_u6027"><a href="#u5C40_u9650_u6027" class="headerlink" title="局限性"></a>局限性</h3><p>使用工厂方法有三个局限，第一个与<strong>代码重构</strong>有关，另外两个与<strong>类的扩展</strong>有关。</p>
<ul>
<li>第一个局限是，<strong>重构已经存在的类会破坏客户端代码</strong>。例如，<code>Complex</code>类是一个标准的类，客户端使用构造方法将其实例化。可能会有很多这样的客户端代码：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Complex c = <span class="keyword">new</span> Complex(-<span class="number">1</span>, <span class="number">0</span>);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>一旦<code>Complex</code>的编写者意识到<code>Complex</code>的实例化应该使用工厂方法实现，他会将<code>Complex</code>的构造方法设为私有。而此时使用它的构造方法的客户端代码就都失效了。</p>
<ul>
<li><p>第二个局限是，<strong>因为工厂方法所实例化的类具有私有的构造方法，所以这些类就不能扩展了。因为任何子类都必须调用父类的构造方法，但父类的私有构造方法是不能被子类调用的。</strong></p>
</li>
<li><p>第三个局限是，如果确实扩展了工厂方法所实例化的类（例如将构造方法设为保护的，虽然有风险但也是可行的），子类必须具有所有工厂方法的一套实现。例如，在上述<code>Complex</code>的例子中，如果<code>Complex</code>有了一个子类<code>StrangeComplex</code>，那么<code>StrangeComplex</code>必须提供属于它自己的所有工厂方法，否则</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">StrangeComplex.fromPolar(<span class="number">1</span>, pi);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>将会返回一个<code>Complex</code>（父类）的实例，而不是所希望的子类实例。但有些语言的反射特性可以避免这个问题。</p>
<p><strong>通过修改底层编程语言，使工厂方法称为第一类的类成员，可以缓解这三个问题。</strong></p>
<h2 id="u7B80_u5355_u5DE5_u5382_u6A21_u5F0F_28Simple_Factory_pattern_29"><a href="#u7B80_u5355_u5DE5_u5382_u6A21_u5F0F_28Simple_Factory_pattern_29" class="headerlink" title="简单工厂模式(Simple Factory pattern)"></a>简单工厂模式(Simple Factory pattern)</h2><p>普通的工厂方法模式通常伴随着对象的具体类型与工厂具体类型的一一对应，客户端代码根据需要选择合适的具体类型工厂使用。然而，这种选择可能包含复杂的逻辑。这时，可以创建一个单一的工厂类，用以包含这种选择逻辑，根据参数的不同选择实现不同的具体对象。这个工厂类不需要由每个具体产品实现一个自己的具体的工厂类，所以可以将工厂方法设置为静态方法。而且，工厂方法封装了对象的创建过程。如果创建过程非常复杂（比如依赖于配置文件或用户输入），工厂方法就非常有用了。比如，一个程序要读取图像文件。程序支持多种图像格式，每种格式都有一个对应的<code>ImageReader</code>类用来读取图像。程序每次读取图像时，需要基于文件信息创建合适类型的<code>ImageReader</code>。这个选择逻辑可以包装在一个简单工厂中：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ImageReaderFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ImageReader <span class="title">imageReaderFactoryMethod</span><span class="params">(InputStream is)</span> </span>&#123;</span><br><span class="line">        ImageReader product = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> imageType = determineImageType(is);</span><br><span class="line">        <span class="keyword">switch</span> (imageType) &#123;</span><br><span class="line">            <span class="keyword">case</span> ImageReaderFactory.GIF:</span><br><span class="line">                product = <span class="keyword">new</span> GifReader(is);</span><br><span class="line">            <span class="keyword">case</span> ImageReaderFactory.JPEG:</span><br><span class="line">                product = <span class="keyword">new</span> JpegReader(is);</span><br><span class="line">            <span class="comment">//...</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> product;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>GOF在《设计模式》一书中将工厂模式分为两类：工厂方法模式（Factory Method）与抽象工厂模式（Abstract Factory）。将简单工厂模式（Simple Factory）看为工厂方法模式的一种特例，两者归为一类。 </p>
<p>简单来说就是建立一个工厂（一个函数或一个类方法）来制造新的对象。<br>就是从无到有。客户自己创建图片，然后拿来用。</p>
<hr>
<p>工厂方法模式仿佛已经很完美的对对象的创建进行了包装，使得客户程序中仅仅处理抽象产品角色提供的接口，但使得对象的数量成倍增长。当产品种类非常多时，会出现大量的与之对应的工厂对象，这不是我们所希望的。</p>
<p>以上就是简单工厂模式与工厂方法模式的全部内容了，或许例子有点少，但是自己戳一下引用推荐的那两篇博客，仔细看一看，就会有更深的理解。</p>
<blockquote>
<p>参考资料：</p>
<ul>
<li><a href="https://zh.wikipedia.org/wiki/%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95" target="_blank" rel="external">Wiki——工厂方法</a></li>
<li><a href="http://blog.csdn.net/zhengzhb/article/details/7348707" target="_blank" rel="external">CSDN卡奴达摩的专栏——23种设计模式（2）：工厂方法模式</a></li>
<li><a href="http://www.cnblogs.com/li-peng/archive/2013/02/17/2913568.html" target="_blank" rel="external">博客园技术控——设计模式：工厂方法模式</a></li>
<li><a href="http://blog.csdn.net/jason0539/article/details/23020989" target="_blank" rel="external">一个本科小生的奋斗史——java设计模式之工厂方法</a></li>
</ul>
</blockquote>

      
	  <div id="back-to-top" data-scroll="body">
        <a href="#top" style="color:white"></a>
      </div>
    </div>
    
  </div>
  
    
<div class="copyright">
  <p><span>本文标题:</span><a href="/2015/07/17/浅谈设计模式之工厂方法模式/">浅谈设计模式之工厂方法模式</a></p>
  <p><span>文章作者:</span>
  	<a href="/" title="访问 Airing 的个人博客">Airing</a>
  	<a href="https://github.com/airingursb" title="访问 Airing 的GitHub"><i class="fa fa-github-alt"></i></a>
  </p>
  <p><span>发布时间:</span>2015年07月17日 - 13时11分</p>
  <p><span>最后更新:</span>2016年02月20日 - 14时12分</p>
  <p>
    <span>原始链接:</span><a class="post-url" href="/2015/07/17/浅谈设计模式之工厂方法模式/" title="浅谈设计模式之工厂方法模式">http://ursb.me/2015/07/17/浅谈设计模式之工厂方法模式/</a>
    <span class="copy-path" data-clipboard-text="原文: http://ursb.me/2015/07/17/浅谈设计模式之工厂方法模式/　　作者: Airing" title="点击复制文章链接">
        <i class="fa fa-clipboard"></i>
    </span>
  </p>
  <p><span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" title="中国大陆 (CC BY-NC-SA 3.0 CN)">"署名-非商用-相同方式共享 3.0"</a> 转载请保留原文链接及作者。</p>
  <script src="/js/clipboard.min.js"></script>
  <script> var clipboard = new Clipboard('.copy-path'); </script>
</div>





<nav id="article-nav">
  
    <a href="/2015/07/18/数据库范式之第一范式/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          数据库范式之第一范式
        
      </div>
    </a>
  
  
    <a href="/2015/07/16/浅谈Robocup智能搬运算法/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">浅谈Robocup智能搬运算法</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
  </article>



<div class="share">
    
        <div class="bdsharebuttonbox">
            <li id="bds_twi"><a href="#" class="bds_twi" data-cmd="twi" title="分享到推特"></a></li>
            <li id="bds_tsina"><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a></li>
            <li id="bds_sqq"><a href="#" class="bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a></li>
            <li id="bds_copy"><a href="#" class="bds_copy" data-cmd="copy" title="复制网址"></a></li>
            <li id="bds_mail"><a href="#" class="bds_mail" data-cmd="mail" title="通过邮件分享"></a></li>
            <li id="bds_weixin"><a href="#" class="bds_weixin" data-cmd="weixin" title="生成文章二维码"></a></li>
            <li id="bds_more"><a href="#" class="bds_more" data-cmd="more"></i></a></li>
        </div>
        <script>
            window._bd_share_config={
                "common":{"bdSnsKey":{},"bdText":"浅谈设计模式之工厂方法模式　| Airing的博客　","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
        </script>
    
</div>







<div class="duoshuo">
	<span style="font-size:14px; margin:3px auto">最近访客</span>
	<hr size=1 style="color:#ff9999;border-style:double;color:#CCC"> 
	<div class="ds-recent-visitors" style="background: rgba(255, 255, 255, .2);" data-num-items="60" data-avatar-size="42" id="ds-recent-visitors"></div>
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="浅谈设计模式之工厂方法模式" data-title="浅谈设计模式之工厂方法模式" data-url="http://ursb.me/2015/07/17/浅谈设计模式之工厂方法模式/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"airingursb"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		//ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.src = 'http://ursb.me/js/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>



</div>
      <footer id="footer">
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  <div class="outer">
  	<div id="footer-info">
		<span id="span_dt_dt"></span>
		<span class="my-face">(●'◡'●)ﾉ♥</span>
	</div>
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 Airing
			<i class="fa fa-heart animated infinite pulse"></i>
		</div>
      	<div class="footer-right">
		    <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1258655927'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s11.cnzz.com/z_stat.php%3Fid%3D1258655927' type='text/javascript'%3E%3C/script%3E"));</script>
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/airingursb/hexo-theme-airia" target="_blank">Airia</a> by Airing
      	</div>
		<div id="footer-time">
			<span id="busuanzi_container_site_pv">
	    		本站总访问量<span id="busuanzi_value_site_pv"></span>次
			</span>
			<span id="busuanzi_container_page_pv">
	  			本文总阅读量<span id="busuanzi_value_page_pv"></span>次
	  		</span>
		</div>
    </div>
  </div>
  <script> 
  $(document).ready(function ($) {
    // 利用 data-scroll 属性，滚动到任意 dom 元素
    $.scrollto = function (scrolldom, scrolltime) {
        $(scrolldom).click(function () {
            var scrolltodom = $(this).attr("data-scroll");
            $(this).addClass("active").siblings().removeClass("active");
            $('html, body').animate({
                scrollTop: $(scrolltodom).offset().top
            }, scrolltime);
            return false;
        });
    };
    // 判断位置控制 返回顶部的显隐
    if ($(window).width() > 800) {
        var backTo = $("#back-to-top");
        var backHeight = $(window).height() - 980 + 'px';
        $(window).scroll(function () {
            if ($(window).scrollTop() > 700 && backTo.css('top') === '-900px') {
                backTo.css('top', backHeight);
            }
            else if ($(window).scrollTop() <= 700 && backTo.css('top') !== '-900px') {
                backTo.css('top', '-900px');
            }
        });
    }
    // 启用
    $.scrollto("#back-to-top", 800);
	
	show_date_time();
	
	$("html,body").click(function(e){
	var n=Math.round(Math.random()*100);//随机数
	var $i=$("<b/>").text("+"+n);//添加到页面的元素
	var x=e.pageX,y=e.pageY;//鼠标点击的位置
	$i.css({
		"z-index":99999,
		"top":y-20,
		"left":x,
		"position":"absolute",
		"color":"#E94F06"
	});
	$("body").append($i);
	$i.animate(
		{"top":y-180,"opacity":0},
		1500,
		function(){$i.remove();}
	);
	e.stopPropagation();
	});
  });
  
  	
	function show_date_time() {
	    window.setTimeout("show_date_time()", 1000);
	    var BirthDay = new Date("December 4, 2014 21:12:00");
	    var today = new Date();
	    var timeold = (today.getTime() - BirthDay.getTime());
	    var msPerDay = 24 * 60 * 60 * 1000;
	    var e_daysold = timeold / msPerDay;
	    var daysold = Math.floor(e_daysold);
	    var e_hrsold = (e_daysold - daysold) * 24;
	    var hrsold = Math.floor(e_hrsold);
	    var e_minsold = (e_hrsold - hrsold) * 60;
	    var minsold = Math.floor((e_hrsold - hrsold) * 60);
	    var seconds = Math.floor((e_minsold - minsold) * 60);
	    span_dt_dt.innerHTML = "博客已萌萌哒运行了" + daysold + "天" + hrsold + "小时" + minsold + "分" + seconds + "秒";
	}
  </script>
</footer>

    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>